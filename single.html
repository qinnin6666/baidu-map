<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>单例模式</title>
</head>

<body>
    <!-- <button id="loginBtn">登录</button> -->
    <div id="div1">222</div>
    <script>
        // var Singleton = function (name) {
        //     this.name = name;
        //     this.instance = null;
        // };
        // Singleton.prototype.getName = function () {
        //     console.log(this.name);
        // };
        // Singleton.getInstance = function (name) {
        //     if (!this.instance) {
        //         this.instance = new Singleton(name);
        //     }
        //     return this.instance;
        // };
        // var a = Singleton.getInstance('sven1');
        // var b = Singleton.getInstance('sven2');
        // console.log(a === b); // true 


        // // or
        // var Singleton = function (name) {
        //     this.name = name;
        // };
        // Singleton.prototype.getName = function () {
        //     console.log(this.name);
        // };
        // Singleton.getInstance = (function () {
        //     var instance = null;
        //     return function (name) {
        //         if (!instance) {
        //             instance = new Singleton(name);
        //         }
        //         return instance;
        //     }
        // })(); 

        // var CreateDiv = (function () {
        //     var instance;
        //     var CreateDiv = function (html) {
        //         if (instance) {
        //             return instance;
        //         }
        //         this.html = html;
        //         this.init();
        //         return instance = this;
        //     };
        //     CreateDiv.prototype.init = function () {
        //         var div = document.createElement('div');
        //         div.innerHTML = this.html;
        //         document.body.appendChild(div);
        //     };
        //     return CreateDiv;
        // })();
        // var a = new CreateDiv('sven1');
        // var b = new CreateDiv('sven2');
        // console.log(a === b); // true

        // var CreateDiv = function (html) {
        //     this.html = html;
        //     this.init();
        // };
        // CreateDiv.prototype.init = function () {
        //     var div = document.createElement('div');
        //     div.innerHTML = this.html;
        //     document.body.appendChild(div);
        // };

        // var ProxySingletonCreateDiv = (function () {
        //     var instance;
        //     return function (html) {
        //         if (!instance) {
        //             instance = new CreateDiv(html);
        //         }
        //         return instance;
        //     }
        // })();
        // var a = new ProxySingletonCreateDiv('sven1');
        // var b = new ProxySingletonCreateDiv('sven2');
        // console.log(a === b);


        // var getSingle = function (fn) {
        //     var result;
        //     return function () {
        //         return result || (result = fn.apply(this, arguments));
        //     }
        // };

        // var createLoginLayer = function () {
        //     var div = document.createElement('div');
        //     div.innerHTML = '我是登录浮窗';
        //     div.style.display = 'none';
        //     document.body.appendChild(div);
        //     return div;
        // };
        // var createSingleLoginLayer = getSingle(createLoginLayer);
        // document.getElementById('loginBtn').onclick = function () {
        //     var loginLayer = createSingleLoginLayer();
        //     console.log(22323);
        //     loginLayer.style.display = 'block';
        // };

        // var createSingleIframe = getSingle(function () {
        //     var iframe = document.createElement('iframe');
        //     document.body.appendChild(iframe);
        //     return iframe;
        // });
        // document.getElementById('loginBtn').onclick = function () {
        //     var loginLayer = createSingleIframe();
        //     loginLayer.src = 'http://baidu.com';
        // };


        var getSingle = function (fn) {
            var result;
            console.log(22, result);
            return function () {
                return result || (result = fn.apply(this, arguments));
            }
        };
        var bindEvent = getSingle(function () {
            document.getElementById('div1').onclick = function () {
                alert('click');
            }
            return true;
        });
        var render = function () {
            console.log('开始渲染列表');
            console.log(bindEvent());
        };
        render()
        render()
        render()
    </script>
</body>

</html>